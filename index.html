<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PAY YOUR BILLS</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
    />
  </head>
  <body background="BillsWebsite/assets/money.jpg">
    <section class="section">
      <div class="container">
        <h1 class="title">Jonathan Gyle Sean bills</h1>

        <table class="table is-fullwidth is-striped is-mobile">
          <thead>
            <tr>
              <th>Month</th>
              <th>PGE</th>
              <th>Water/trash</th>
              <th>Internet</th>
              <th>Total</th>
              <th>Due</th>
            </tr>
          </thead>
          <tbody>
            <tr id="septemberRow" class="counted">
              <td>September</td>
              <td>9.79</td>
              <td>0</td>
              <td>46.39</td>
              <td id="sepTot">Data5</td>
              <td>10/12</td>
            </tr>

            <tr id="octoberRow" class="counted">
              <td>October</td>
              <td>28.18</td>
              <td>201.12</td>
              <td>30</td>
              <td>total</td>

              <td>11/7</td>
            </tr>

            <tr id="novemberRow" class="counted">
              <td>November</td>
              <td>48.34</td>
              <td>174.18</td>
              <td>30</td>
              <td>total</td>
              <td>12/7</td>
            </tr>

            <tr id="decRow" class="counted">
              <td>December</td>
              <td>42.47</td>
              <td>160.18</td>
              <td>30</td>
              <td>total</td>
              <td>1/16</td>
            </tr>

            <tr id="janRow" class="counted">
              <td>January</td>
              <td>50.10</td>
              <td>146.17</td>
              <td>30</td>
              <td>total</td>
              <td>2/07</td>
            </tr>

            <tr id="FebRow" class="counted">
              <td>February</td>
              <td>70.26</td>
              <td>174.18</td>
              <td>30</td>
              <td>total</td>
              <td>3/08</td>
            </tr>

            <tr id="MarRow" class="counted">
              <td>March</td>
              <td>53.66</td>
              <td>160.18</td>
              <td>30</td>
              <td>total</td>
              <td>4/08</td>
            </tr>

            <tr id="AprRow" class="counted">
              <td>April</td>
              <td>0</td>
              <td>160.18</td>
              <td>30</td>
              <td>total</td>
              <td>5/07</td>
            </tr>

            <tr id="MayRow" class="has-text-weight-bold counted">
              <td>May</td>
              <td>0</td>
              <td>131.97</td>
              <td>45</td>
              <td>total</td>
              <td>6/06</td>
            </tr>

            <tr>
              <td>June</td>
              <td>PGE</td>
              <td>water</td>
              <td>30</td>
              <td>total</td>
              <td>TBD</td>
            </tr>

            <tr>
              <td>July</td>
              <td>PGE</td>
              <td>water</td>
              <td>30</td>
              <td>total</td>
              <td>TBD</td>
            </tr>

            <tr>
              <td>August</td>
              <td>PGE</td>
              <td>water</td>
              <td>30</td>
              <td>total</td>
              <td>TBD</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
    <script>
      let waterG = 0;
      let pgeG = 0;
      let internetG = 0;
      let sumG = 0;
      let test = new Date();
      test = test.getMonth();
      const monthAbbreviations = [
        "Jan",
        "Feb",
        "Mar",
        "Apr",
        "May",
        "Jun",
        "Jul",
        "Aug",
        "Sep",
        "Oct",
        "Nov",
        "Dec",
      ];

      // Generate IDs for each month
      const monthRowIDs = monthAbbreviations.map((month) => `${month}Row`);

      function calculateAndUpdateTotal(monthRow) {
        const pge = parseFloat(monthRow.cells[1].textContent);

        monthRow.cells[1].textContent = (pge / 3).toFixed(2);
        const water = parseFloat(monthRow.cells[2].textContent);
        monthRow.cells[2].textContent = (water / 3).toFixed(2);
        const internet = parseFloat(monthRow.cells[3].textContent);
        monthRow.cells[3].textContent = (internet / 3).toFixed(2);
        const sum = (pge + water + internet) / 3;

        monthRow.cells[4].textContent = sum.toFixed(2);
        if (pge > pgeG) {
          monthRow.cells[1].style = "background-color:  rgba(255, 0, 0, 0.5)";
        } else if (pge < pgeG) {
          monthRow.cells[1].style = "background-color: rgba(0, 128, 0, 0.5) ";
        } else if (pge == pgeG) {
          monthRow.cells[1].style =
            "background-color: rgba(128, 128, 128, 0.5) ";
        }
        if (water > waterG) {
          monthRow.cells[2].style = "background-color: rgba(255, 0, 0, 0.5)";
        } else if (water < waterG) {
          monthRow.cells[2].style = "background-color: rgba(0, 128, 0, 0.5) ";
        } else if (water === waterG) {
          monthRow.cells[2].style =
            "background-color: rgba(128, 128, 128, 0.5) ";
        }

        if (internet > internetG) {
          monthRow.cells[3].style = "background-color: rgba(255, 0, 0, 0.5)";
        } else if (internet < internetG) {
          monthRow.cells[3].style = "background-color: rgba(0, 128, 0, 0.5) ";
        } else if (internet === internetG) {
          monthRow.cells[3].style =
            "background-color: rgba(128, 128, 128, 0.5) ";
        }

        if (sum > sumG) {
          monthRow.cells[4].style = "background-color: rgba(255, 0, 0, 0.5)";
        } else if (sum < sumG) {
          monthRow.cells[4].style = "background-color: rgba(0, 128, 0, 0.5) ";
        } else if (sum === sumG) {
          monthRow.cells[4].style =
            "background-color: rgba(128, 128, 128, 0.5) ";
        }
        pgeG = pge;
        waterG = water;
        internetG = internet;
        sumG = sum;
      }

      const matches = document.querySelectorAll("tr.counted");
      matches.forEach((month) => {
        if (month.id == monthRowIDs[test]) {
          month.style = "background-color: rgba(0, 191, 255, 0.3)";
        }
        calculateAndUpdateTotal(month);
      });
    </script>
  </body>
</html>
